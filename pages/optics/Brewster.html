<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¸Œë£¨ìŠ¤í„° ë²•ì¹™ê³¼ ìŒê·¹ì ë°©ì‚¬ ì‹œë®¬ë ˆì´ì…˜</title>

    <!-- MathJax ë¡œë“œ (LaTeX ìˆ˜ì‹ ë Œë”ë§ìš©) -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

    <style>
        :root {
            --p-color: #2563eb; /* p-í¸ê´‘ (íŒŒë‘) */
            --s-color: #dc2626; /* s-í¸ê´‘ (ë¹¨ê°•) */
            --bg-color: #f8fafc;
            --panel-bg: #ffffff;
            --text-color: #1e293b;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            width: 100%;
            max-width: 1050px;
            background: var(--panel-bg);
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
        }

        header {
            text-align: center;
            margin-bottom: 24px;
        }

        h1 { margin: 0; font-size: 1.6rem; color: #0f172a; }
        .desc { font-size: 0.95rem; color: #64748b; margin-top: 8px; line-height: 1.5; }

        .layout {
            display: grid;
            grid-template-columns: 2fr 1.2fr;
            gap: 20px;
        }

        .left-col {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        canvas {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            display: block;
            width: 100%;
        }

        .info-panel {
            background: #eff6ff;
            border-radius: 12px;
            padding: 20px;
            border-left: 5px solid var(--p-color);
            display: flex;
            flex-direction: column;
            gap: 15px;
            height: fit-content;
        }

        .core-principle {
            background: #fff;
            border: 1px solid #bfdbfe;
            padding: 15px;
            border-radius: 8px;
        }

        .core-title {
            font-weight: 800;
            color: #1d4ed8;
            font-size: 1.05rem;
            margin-bottom: 8px;
            display: block;
        }

        .core-text {
            font-size: 0.9rem;
            color: #334155;
            line-height: 1.6;
        }

        .term-box {
            background: #fff;
            border: 1px solid #e2e8f0;
            padding: 15px;
            border-radius: 8px;
        }

        .term-title {
            font-weight: 700;
            font-size: 0.95rem;
            margin-bottom: 4px;
            display: block;
            color: #0f172a;
        }

        .term-desc {
            font-size: 0.85rem;
            color: #475569;
            margin-bottom: 12px;
            line-height: 1.5;
        }
        .term-desc:last-child { margin-bottom: 0; }

        .highlight-p { color: var(--p-color); font-weight: bold; }
        .highlight-s { color: var(--s-color); font-weight: bold; }

        .controls {
            background: #f1f5f9;
            padding: 16px;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        label {
            font-size: 0.9rem;
            font-weight: 700;
            color: #475569;
            display: flex;
            justify-content: space-between;
        }

        input[type="range"] {
            width: 100%;
            cursor: pointer;
            accent-color: #475569;
        }

        .btn-group {
            display: flex;
            gap: 10px;
        }

        button {
            flex: 1;
            padding: 8px 0;
            border: 2px solid #cbd5e1;
            border-radius: 6px;
            background: white;
            font-weight: 600;
            color: #475569;
            cursor: pointer;
            transition: 0.2s;
        }

        button.active[data-type="all"] { border-color: #475569; background: #475569; color: white; }
        button.active[data-type="p"] { border-color: var(--p-color); background: var(--p-color); color: white; }
        button.active[data-type="s"] { border-color: var(--s-color); background: var(--s-color); color: white; }

        @media (max-width: 900px) {
            .layout { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>ì „ìê¸°í•™ìœ¼ë¡œ ì¦ëª…í•˜ëŠ” ë¸Œë£¨ìŠ¤í„° ë²•ì¹™</h1>
        <p class="desc">
            ë¹›ì´ ë§¤ì§ˆì— ì…ì‚¬í•˜ë©´ ë§¤ì§ˆ ë‚´ì˜ ì „ìë“¤ì„ ì§„ë™ì‹œì¼œ <b>ì „ê¸° ìŒê·¹ì(Electric Dipole)</b>ë¥¼ í˜•ì„±í•©ë‹ˆë‹¤.<br>
            ë°˜ì‚¬ê´‘ì€ ì´ ìŒê·¹ìë“¤ì´ ë¿œì–´ë‚´ëŠ”(ì¬ë°©ì‚¬í•˜ëŠ”) ì „ìê¸°íŒŒì…ë‹ˆë‹¤.
        </p>
    </header>

    <div class="layout">
        <!-- ì™¼ìª½: ë©”ì¸ ê´‘í•™ ì‹œë®¬ë ˆì´ì…˜ ë° ì»¨íŠ¸ë¡¤ -->
        <div class="left-col">
            <canvas id="opticsCanvas" width="650" height="400"></canvas>
            
            <div class="controls">
                <div class="control-group">
                    <label>ì…ì‚¬ê° (Î¸â‚) ì¡°ì ˆ <span id="valTheta">45.0Â°</span></label>
                    <input type="range" id="inTheta" min="10" max="85" step="0.1" value="45.0">
                    <div style="font-size: 0.85rem; color: #64748b; margin-top: 4px; text-align: right;">
                        ëª©í‘œ: ë¸Œë£¨ìŠ¤í„° ê° (Î¸_B â‰ˆ 56.3Â°)ì— ë§ì¶”ì–´ <span class="highlight-p">p-í¸ê´‘</span>ì˜ ì†Œë©¸ì„ í™•ì¸í•˜ì„¸ìš”.
                    </div>
                </div>
                <div class="control-group" style="margin-top: 5px;">
                    <label>í‘œì‹œí•  í¸ê´‘ ì„±ë¶„</label>
                    <div class="btn-group">
                        <button class="pol-btn active" data-type="all">ë¬´í¸ê´‘ (ë‘˜ ë‹¤)</button>
                        <button class="pol-btn" data-type="p">p-í¸ê´‘ë§Œ</button>
                        <button class="pol-btn" data-type="s">s-í¸ê´‘ë§Œ</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì˜¤ë¥¸ìª½: ì´ë¡  ì„¤ëª… íŒ¨ë„ -->
        <div class="info-panel">
            <div style="text-align: center;">
                <span style="font-size: 0.9rem; font-weight: bold; color: #475569;">[ì°¸ê³ ] ì „ê¸° ìŒê·¹ìì˜ ë°©ì‚¬ íŒ¨í„´</span>
                <canvas id="dipoleCanvas" width="250" height="170" style="margin-top: 8px; height: 160px;"></canvas>
            </div>
            
            <div class="core-principle">
                <span class="core-title">ğŸ’¡ í•µì‹¬ ë¬¼ë¦¬ ì›ë¦¬</span>
                <div class="core-text">
                    <b>"ì§„ë™í•˜ëŠ” ìŒê·¹ìëŠ” ìì‹ ì˜ ì§„ë™ì¶• ë°©í–¥ìœ¼ë¡œëŠ” ì „ìê¸°íŒŒ(ì—ë„ˆì§€)ë¥¼ ì „í˜€ ë°©ì‚¬í•˜ì§€ ì•ŠëŠ”ë‹¤."</b><br><br>
                    ìŒê·¹ìëŠ” ì§„ë™ì¶•ì˜ <b>ìˆ˜ì§ ë°©í–¥</b>ìœ¼ë¡œ ê°€ì¥ ê°•í•œ ë¹›ì„ ë³´ë‚´ë©°, ì¶• ë°©í–¥ìœ¼ë¡œëŠ” ë¹›ì„ ë‚´ë³´ë‚´ì§€ ëª»í•˜ëŠ” ê¸°í•˜í•™ì  ë°©ì‚¬ í•œê³„ë¥¼ ê°€ì§‘ë‹ˆë‹¤.
                </div>
            </div>

            <div class="term-box">
                <span class="core-title" style="margin-bottom: 10px; color: #0f172a;">ğŸ” í¸ê´‘ ë° ê¸°í•˜í•™ì  ì •ì˜</span>
                
                <span class="term-title">1. ì…ì‚¬ë©´ (Plane of Incidence)</span>
                <div class="term-desc">
                    ì…ì‚¬ ê´‘ì„ ì˜ ì§„í–‰ ë°©í–¥ ë²¡í„°($\vec{k}$)ì™€ ë§¤ì§ˆ ê²½ê³„ë©´ì˜ ë²•ì„  ë²¡í„°($\hat{n}$)ê°€ ì´ë£¨ëŠ” 2ì°¨ì› í‰ë©´ì…ë‹ˆë‹¤. <b>í˜„ì¬ ëª¨ë‹ˆí„° í™”ë©´(xy í‰ë©´)ì´ ë°”ë¡œ ì…ì‚¬ë©´ì…ë‹ˆë‹¤.</b>
                </div>
                
                <span class="term-title">2. <span class="highlight-p">p-í¸ê´‘ (p-polarization)</span></span>
                <div class="term-desc">
                    ì „ê¸°ì¥($\vec{E}$)ì´ ì…ì‚¬ë©´ì— <b>í‰í–‰(parallel)</b>í•˜ê²Œ ì§„ë™í•©ë‹ˆë‹¤. í™”ë©´ì— ëˆ„ìš´ ìƒíƒœë¡œ, ì§„í–‰ ë°©í–¥ê³¼ ìˆ˜ì§ìœ¼ë¡œ ì§„ë™í•˜ëŠ” íŒŒë€ìƒ‰ ì–‘ë°©í–¥ í™”ì‚´í‘œì…ë‹ˆë‹¤.
                </div>

                <span class="term-title">3. <span class="highlight-s">s-í¸ê´‘ (s-polarization)</span></span>
                <div class="term-desc">
                    ì „ê¸°ì¥($\vec{E}$)ì´ ì…ì‚¬ë©´ì— <b>ìˆ˜ì§(senkrecht)</b>ìœ¼ë¡œ ì§„ë™í•©ë‹ˆë‹¤. ëª¨ë‹ˆí„° í™”ë©´ì„ ìˆ˜ì§ìœ¼ë¡œ ëš«ê³  ë‚˜ì˜¤ëŠ” ë°©í–¥ìœ¼ë¡œ ì§„ë™í•˜ëŠ” ë¹¨ê°„ìƒ‰ ì›(ì ) í‘œì‹ì…ë‹ˆë‹¤.
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // --- ìº”ë²„ìŠ¤ ë° DOM ìš”ì†Œ ì´ˆê¸°í™” ---
    const canvas = document.getElementById('opticsCanvas');
    const ctx = canvas.getContext('2d');
    const dipCanvas = document.getElementById('dipoleCanvas');
    const dipCtx = dipCanvas.getContext('2d');
    
    const inTheta = document.getElementById('inTheta');
    const valTheta = document.getElementById('valTheta');
    const btns = document.querySelectorAll('.pol-btn');

    let theta1_deg = 45.0;
    let showPol = 'all'; // 'all', 'p', 's'
    
    const n1 = 1.0; // ê³µê¸°
    const n2 = 1.5; // ìœ ë¦¬ (ë¸Œë£¨ìŠ¤í„° ê° ì•½ 56.3ë„)

    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    inTheta.addEventListener('input', () => {
        theta1_deg = parseFloat(inTheta.value);
        valTheta.textContent = `${theta1_deg.toFixed(1)}Â°`;
        drawAll();
    });

    btns.forEach(btn => {
        btn.addEventListener('click', (e) => {
            btns.forEach(b => b.classList.remove('active'));
            e.target.classList.add('active');
            showPol = e.target.getAttribute('data-type');
            drawAll();
        });
    });

    // --- 1. ìŒê·¹ì ë°©ì‚¬ íŒ¨í„´ ìº”ë²„ìŠ¤ ê·¸ë¦¬ê¸° ---
    function drawDipolePattern() {
        dipCtx.clearRect(0, 0, dipCanvas.width, dipCanvas.height);
        const cx = dipCanvas.width / 2;
        const cy = dipCanvas.height / 2;

        // ì§„ë™í•˜ëŠ” ìŒê·¹ì (yì¶• ë°©í–¥)
        dipCtx.strokeStyle = "#2563eb";
        dipCtx.lineWidth = 3;
        dipCtx.beginPath();
        dipCtx.moveTo(cx, cy - 25);
        dipCtx.lineTo(cx, cy + 25);
        dipCtx.stroke();
        
        // í™”ì‚´ì´‰
        dipCtx.fillStyle = "#2563eb";
        dipCtx.beginPath(); dipCtx.moveTo(cx, cy - 30); dipCtx.lineTo(cx - 5, cy - 20); dipCtx.lineTo(cx + 5, cy - 20); dipCtx.fill();
        dipCtx.beginPath(); dipCtx.moveTo(cx, cy + 30); dipCtx.lineTo(cx - 5, cy + 20); dipCtx.lineTo(cx + 5, cy + 20); dipCtx.fill();

        dipCtx.font = "bold 12px sans-serif";
        dipCtx.textAlign = "left";
        dipCtx.fillText("ìŒê·¹ì ì§„ë™ì¶•", cx + 10, cy - 15);

        // ë°©ì‚¬ íŒ¨í„´ (Figure-8: r = R * |sin(theta)|)
        const R = 60;
        dipCtx.strokeStyle = "rgba(220, 38, 38, 0.6)";
        dipCtx.fillStyle = "rgba(220, 38, 38, 0.1)";
        dipCtx.lineWidth = 2;
        dipCtx.beginPath();
        for(let a = 0; a <= Math.PI * 2; a += 0.05) {
            const r = R * Math.abs(Math.sin(a)); 
            const x = cx + r * Math.sin(a);
            const y = cy - r * Math.cos(a);
            if(a === 0) dipCtx.moveTo(x, y);
            else dipCtx.lineTo(x, y);
        }
        dipCtx.closePath();
        dipCtx.fill();
        dipCtx.stroke();

        // ë°©ì‚¬ ê°•ë„ í‘œì‹œì„ 
        dipCtx.strokeStyle = "#dc2626";
        dipCtx.setLineDash([3,3]);
        dipCtx.beginPath(); dipCtx.moveTo(cx - R, cy); dipCtx.lineTo(cx + R, cy); dipCtx.stroke();
        dipCtx.setLineDash([]);
        
        dipCtx.fillStyle = "#dc2626";
        dipCtx.textAlign = "center";
        dipCtx.font = "11px sans-serif";
        dipCtx.fillText("ìµœëŒ€ ë°©ì‚¬", cx + R + 10, cy + 4);
        
        dipCtx.fillStyle = "#64748b";
        dipCtx.fillText("ë°©ì‚¬ ì—†ìŒ (0)", cx, cy - 35);
        dipCtx.fillText("ë°©ì‚¬ ì—†ìŒ (0)", cx, cy + 42);
    }

    // --- 2. ë©”ì¸ ê´‘í•™ ì‹œë®¬ë ˆì´ì…˜ ê·¸ë¦¬ê¸° ---
    function drawP_Pol(x, y, angle, amplitude) {
        if (amplitude < 0.01) return;
        const size = 15 * amplitude;
        const E_angle = angle + Math.PI / 2; // ì§„í–‰ë°©í–¥ì— ìˆ˜ì§
        
        ctx.strokeStyle = "#2563eb"; ctx.fillStyle = "#2563eb"; ctx.lineWidth = 2;
        const dx = size * Math.cos(E_angle); const dy = size * Math.sin(E_angle);

        ctx.beginPath(); ctx.moveTo(x - dx, y - dy); ctx.lineTo(x + dx, y + dy); ctx.stroke();
        const drawHead = (hx, hy, a) => {
            ctx.beginPath(); ctx.moveTo(hx, hy);
            ctx.lineTo(hx - 5*Math.cos(a - Math.PI/6), hy - 5*Math.sin(a - Math.PI/6));
            ctx.lineTo(hx - 5*Math.cos(a + Math.PI/6), hy - 5*Math.sin(a + Math.PI/6));
            ctx.fill();
        };
        drawHead(x + dx, y + dy, E_angle);
        drawHead(x - dx, y - dy, E_angle + Math.PI);
    }

    function drawS_Pol(x, y, amplitude) {
        if (amplitude < 0.01) return;
        const size = 6 * amplitude;
        ctx.strokeStyle = "#dc2626"; ctx.fillStyle = "#ffffff"; ctx.lineWidth = 2;
        ctx.beginPath(); ctx.arc(x, y, Math.max(size, 2), 0, Math.PI * 2); ctx.fill(); ctx.stroke();
        ctx.fillStyle = "#dc2626";
        ctx.beginPath(); ctx.arc(x, y, Math.max(size * 0.3, 1), 0, Math.PI * 2); ctx.fill();
    }

    function drawOptics() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        const cx = canvas.width / 2;
        const cy = canvas.height / 2;
        
        // ë§¤ì§ˆ ë°°ê²½
        ctx.fillStyle = "rgba(224, 242, 254, 0.4)";
        ctx.fillRect(0, cy, canvas.width, canvas.height / 2);
        
        ctx.strokeStyle = "#94a3b8"; ctx.lineWidth = 2;
        ctx.beginPath(); ctx.moveTo(0, cy); ctx.lineTo(canvas.width, cy); ctx.stroke();

        ctx.fillStyle = "#64748b"; ctx.font = "bold 14px sans-serif"; ctx.textAlign = "left";
        ctx.fillText(`ê³µê¸° (nâ‚ = ${n1.toFixed(1)})`, 20, cy - 10);
        ctx.fillText(`ìœ ë¦¬ (nâ‚‚ = ${n2.toFixed(1)})`, 20, cy + 25);

        // ë²•ì„ 
        ctx.strokeStyle = "#94a3b8"; ctx.lineWidth = 1; ctx.setLineDash([5, 5]);
        ctx.beginPath(); ctx.moveTo(cx, 30); ctx.lineTo(cx, canvas.height - 30); ctx.stroke(); ctx.setLineDash([]);

        // ë¬¼ë¦¬ ê³„ì‚°
        const theta1 = theta1_deg * Math.PI / 180;
        let sin_theta2 = (n1 / n2) * Math.sin(theta1);
        let theta2 = Math.asin(sin_theta2);

        // í”„ë ˆë„¬ ë°˜ì‚¬ ê³„ìˆ˜
        const rs = (n1 * Math.cos(theta1) - n2 * Math.cos(theta2)) / (n1 * Math.cos(theta1) + n2 * Math.cos(theta2));
        const rp = (n1 * Math.cos(theta2) - n2 * Math.cos(theta1)) / (n1 * Math.cos(theta2) + n2 * Math.cos(theta1));
        const ts_vis = 1 - Math.abs(rs); 
        const tp_vis = 1 - Math.abs(rp);

        // ê´‘ì„  ê¶¤ì 
        const rayLen = 220;
        const inAngle = Math.PI / 2 - theta1; 
        const inX = cx - rayLen * Math.cos(inAngle); const inY = cy - rayLen * Math.sin(inAngle);
        
        const refAngle = Math.PI / 2 + theta1; 
        const refX = cx + rayLen * Math.cos(Math.PI/2 - theta1); const refY = cy - rayLen * Math.sin(Math.PI/2 - theta1);
        
        const transAngle = Math.PI / 2 - theta2;
        const transX = cx + rayLen * Math.cos(Math.PI/2 - theta2); const transY = cy + rayLen * Math.sin(Math.PI/2 - theta2);

        // ë¹›ì˜ ì„  ê·¸ë¦¬ê¸°
        const drawLine = (x1, y1, x2, y2) => { ctx.strokeStyle="#1e293b"; ctx.lineWidth=2; ctx.beginPath(); ctx.moveTo(x1, y1); ctx.lineTo(x2, y2); ctx.stroke(); };
        drawLine(inX, inY, cx, cy); drawLine(cx, cy, refX, refY); drawLine(cx, cy, transX, transY);

        // --- í¸ê´‘ ë²¡í„° ê·¸ë¦¬ê¸° ---
        const drawPols = (startX, startY, endX, endY, angle, amp_p, amp_s) => {
            const dx = (endX - startX) / 5; const dy = (endY - startY) / 5;
            for (let i = 1; i <= 4; i++) {
                if (showPol === 'all' || showPol === 's') {
                    const offset = (showPol === 'all') ? 4 : 0;
                    drawS_Pol(startX + dx*i + offset*Math.cos(angle+Math.PI/2), startY + dy*i + offset*Math.sin(angle+Math.PI/2), Math.abs(amp_s));
                }
                if (showPol === 'all' || showPol === 'p') {
                    drawP_Pol(startX + dx*i, startY + dy*i, angle, Math.abs(amp_p));
                }
            }
        };

        const vecInAngle = Math.atan2(cy - inY, cx - inX);
        const vecRefAngle = Math.atan2(refY - cy, refX - cx);
        const vecTransAngle = Math.atan2(transY - cy, transX - cx);

        drawPols(inX, inY, cx, cy, vecInAngle, 1.0, 1.0);
        drawPols(cx, cy, refX, refY, vecRefAngle, Math.abs(rp), Math.abs(rs));
        drawPols(cx, cy, transX, transY, vecTransAngle, tp_vis, ts_vis);

        // --- í•µì‹¬ ì‹œê°í™”: êµ´ì ˆê´‘ì˜ p-í¸ê´‘ ì§„ë™ì¶• ì—°ì¥ì„  ---
        const dipoleAxisAngle = vecTransAngle + Math.PI/2; 
        
        if (showPol === 'all' || showPol === 'p') {
            ctx.strokeStyle = "#2563eb";
            ctx.lineWidth = 1.5;
            ctx.setLineDash([4, 4]);
            ctx.beginPath();
            ctx.moveTo(cx, cy);
            ctx.lineTo(cx + 250 * Math.cos(dipoleAxisAngle + Math.PI), cy + 250 * Math.sin(dipoleAxisAngle + Math.PI));
            ctx.stroke();
            ctx.setLineDash([]);
            
            ctx.fillStyle = "#2563eb";
            ctx.font = "bold 12px sans-serif";
            ctx.textAlign = "left";
            ctx.fillText("ë§¤ì§ˆ ë‚´ ìŒê·¹ì(p-í¸ê´‘)ì˜ ì§„ë™ì¶• ì—°ì¥ì„ ", cx - 250, cy + 130);
        }

        // --- ë°˜ì‚¬ê´‘ê³¼ êµ´ì ˆê´‘ ì‚¬ì´ ê°ë„ í‘œì‹œ ---
        const totalAngle = (180 - theta1_deg - (theta2 * 180 / Math.PI));
        ctx.strokeStyle = "#d97706"; ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.arc(cx, cy, 40, -Math.PI/2 + theta1, Math.PI/2 - theta2, false);
        ctx.stroke();
        
        ctx.fillStyle = "#d97706";
        ctx.font = "bold 14px sans-serif";
        ctx.textAlign = "left";
        ctx.fillText(`ë°˜ì‚¬-êµ´ì ˆ ê°ë„: ${totalAngle.toFixed(1)}Â°`, cx + 50, cy);

        // ë¸Œë£¨ìŠ¤í„° ê° ë„ë‹¬ ì‹œ ì‹œê° íš¨ê³¼
        if (Math.abs(rp) < 0.05) {
            ctx.fillStyle = "#dc2626";
            ctx.font = "bold 16px sans-serif";
            ctx.textAlign = "center";
            ctx.fillText("ğŸ”¥ ë¸Œë£¨ìŠ¤í„° ê° ë„ë‹¬! (ë°˜ì‚¬ê´‘ê³¼ êµ´ì ˆê´‘ì´ 90Â° ì§êµ)", cx, 40);
            
            ctx.fillStyle = "#1e40af";
            ctx.font = "14px sans-serif";
            if (showPol === 'all' || showPol === 'p') {
                ctx.fillText("ìŒê·¹ìì˜ ì§„ë™ì¶•ì´ ì •í™•íˆ ë°˜ì‚¬ê´‘ì˜ ê²½ë¡œë¥¼ ê°€ë¦¬í‚¤ë¯€ë¡œ, ì´ ë°©í–¥ìœ¼ë¡  p-í¸ê´‘ì´ ë°©ì‚¬ë˜ì§€ ëª»í•©ë‹ˆë‹¤.", cx, 65);
            }
            
            // ì§ê° í‘œì‹œê¸° (90ë„)
            ctx.strokeStyle = "#dc2626";
            ctx.beginPath();
            const sqLen = 15;
            const a1 = -Math.PI/2 + theta1; 
            const a2 = Math.PI/2 - theta2;  
            const px1 = cx + sqLen * Math.cos(a1); const py1 = cy + sqLen * Math.sin(a1);
            const px2 = px1 + sqLen * Math.cos(a2); const py2 = py1 + sqLen * Math.sin(a2);
            const px3 = cx + sqLen * Math.cos(a2); const py3 = cy + sqLen * Math.sin(a2);
            ctx.moveTo(px1, py1); ctx.lineTo(px2, py2); ctx.lineTo(px3, py3);
            ctx.stroke();
        }
    }

    function drawAll() {
        drawDipolePattern();
        drawOptics();
    }

    // ì´ˆê¸° ì‹¤í–‰
    document.fonts.ready.then(() => {
        drawAll();
    });
</script>

</body>
</html>
