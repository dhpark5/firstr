<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠ¤ë„¬ì˜ ë²•ì¹™ ë° êµ´ì ˆ ì‹œë®¬ë ˆì´ì…˜</title>
    
    <!-- MathJax ë¡œë“œ (ì´ë¡  ì„¤ëª… ìˆ˜ì‹ ë Œë”ë§ìš©) -->
    <script>
        MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

    <style>
        :root {
            --primary-color: #3b82f6;
            --secondary-color: #f59e0b;
            --bg-color: #f8fafc;
            --panel-bg: #ffffff;
            --text-color: #334155;
            --border-color: #e2e8f0;
            --laser-red: #ef4444;
            --laser-green: #10b981;
            --laser-blue: #3b82f6;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            width: 100%;
            max-width: 900px;
            background: var(--panel-bg);
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
        }

        header {
            text-align: center;
            margin-bottom: 20px;
        }

        h1 { margin: 0; font-size: 1.6rem; color: #0f172a; }
        .desc { font-size: 0.95rem; color: #64748b; margin-top: 8px; }

        /* íƒ­ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .tab-group {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 15px;
        }
        
        .tab-btn {
            padding: 12px 24px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: #ffffff;
            color: #64748b;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .tab-btn:hover { background: #f1f5f9; }
        .tab-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            box-shadow: 0 4px 6px rgba(59, 130, 246, 0.3);
        }

        .view-section { display: none; width: 100%; animation: fadeIn 0.3s ease-in-out; }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* ì‹œë®¬ë ˆì´ì…˜ ì˜ì—­ ìŠ¤íƒ€ì¼ */
        canvas {
            width: 100%;
            background: #ffffff;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            display: block;
        }

        #simCanvas { height: 400px; }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin-top: 20px;
            padding: 16px;
            background: #f1f5f9;
            border-radius: 12px;
        }

        .result-box {
            background: white;
            padding: 12px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .result-title {
            font-size: 0.85rem;
            font-weight: 700;
            color: #64748b;
            margin-bottom: 6px;
            display: block;
        }

        .result-val { font-size: 1.3rem; font-weight: 800; color: #0f172a; }
        .result-sub { font-size: 0.8rem; color: #64748b; margin-top: 6px; line-height: 1.4; }
        
        .intensity-bar-container {
            width: 100%; height: 6px; background: #e2e8f0; border-radius: 3px; margin-top: 6px; overflow: hidden;
        }
        .intensity-bar { height: 100%; background: #94a3b8; transition: width 0.2s; }

        .controls {
            margin-top: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .control-panel {
            background: #f8fafc;
            border: 1px solid var(--border-color);
            padding: 16px;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .control-group { display: flex; flex-direction: column; gap: 8px; }

        label {
            font-size: 0.85rem;
            font-weight: 700;
            color: #475569;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        select, input[type="number"] {
            padding: 8px;
            border: 1px solid #cbd5e1;
            border-radius: 6px;
            font-size: 0.95rem;
            width: 100%;
            box-sizing: border-box;
        }
        
        input[type="range"] { width: 100%; cursor: pointer; }
        
        /* ë ˆì´ì € ìƒ‰ìƒ ë²„íŠ¼ */
        .color-btns { display: flex; gap: 8px; }
        .color-btn {
            flex: 1; padding: 8px 0; border: 2px solid transparent; border-radius: 6px;
            font-weight: bold; cursor: pointer; opacity: 0.6; color: white;
        }
        .color-btn.active { opacity: 1; border-color: #334155; transform: scale(1.05); }
        .btn-red { background-color: var(--laser-red); }
        .btn-green { background-color: var(--laser-green); }
        .btn-blue { background-color: var(--laser-blue); }
        
        .badge-1 { color: #0ea5e9; font-weight: bold; } /* ë§¤ì§ˆ 1 */
        .badge-2 { color: #8b5cf6; font-weight: bold; } /* ë§¤ì§ˆ 2 */

        /* ì´ë¡  ì„¤ëª… ì˜ì—­ ìŠ¤íƒ€ì¼ */
        .theory-box {
            background: #eff6ff;
            padding: 24px;
            border-radius: 12px;
            border-left: 5px solid var(--primary-color);
            margin-bottom: 20px;
        }
        .theory-title { color: #1e40af; margin-top: 0; font-size: 1.2rem; }
        .theory-content { font-size: 1rem; color: #334155; line-height: 1.6; }
        .math-expr {
            font-size: 1.15rem;
            text-align: center;
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 1px solid #bfdbfe;
            overflow-x: auto;
        }
        .coeff-box {
            background: #f8fafc;
            padding: 24px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>âœ¨ ìŠ¤ë„¬ì˜ ë²•ì¹™ê³¼ í”„ë ˆë„¬ ë°˜ì‚¬</h1>
        <p class="desc">ë¹›ì˜ ì§„í–‰ ë°©í–¥ì„ ììœ ë¡­ê²Œ ì¡°ì‘í•˜ë©° ì…ì‚¬ê°ê³¼ ë§¤ì§ˆì— ë”°ë¥¸ êµ´ì ˆ/ë°˜ì‚¬ í˜„ìƒì„ ê´€ì°°í•´ë³´ì„¸ìš”.</p>
    </header>

    <div class="tab-group">
        <button class="tab-btn" id="btnTheory" onclick="switchTab('theory')">ğŸ“– ì´ë¡  ë° ê³µì‹ ì¦ëª…</button>
        <button class="tab-btn active" id="btnSim" onclick="switchTab('sim')">ğŸ¯ êµ´ì ˆÂ·ë¶„ì‚° ì‹œë®¬ë ˆì´ì…˜</button>
    </div>

    <!-- 1. ì´ë¡  ì„¤ëª… í™”ë©´ -->
    <div id="viewTheory" class="view-section">
        <div class="theory-box">
            <h3 class="theory-title">ìŠ¤ë„¬ì˜ ë²•ì¹™ (Snell's Law)</h3>
            <div class="theory-content">
                íŒŒë™ì´ í•œ ë§¤ì§ˆì—ì„œ ë‹¤ë¥¸ ë§¤ì§ˆë¡œ ì§„í–‰í•  ë•Œ, ê²½ê³„ë©´ì—ì„œ ì§„í–‰ ë°©í–¥ì´ êº¾ì´ëŠ” í˜„ìƒì„ <b>êµ´ì ˆ(Refraction)</b>ì´ë¼ê³  í•©ë‹ˆë‹¤.
                <div class="math-expr">
                    $n_1 \sin \theta_1 = n_2 \sin \theta_2$
                </div>
            </div>
        </div>

        <div class="coeff-box">
            <h3 style="margin-top: 0; color: #1e293b;">íŒŒë©´(Wavefront)ì„ ì´ìš©í•œ ê¸°í•˜í•™ì  ê³µì‹ ìœ ë„</h3>
            <div class="theory-content">
                ë¹›ì´ ë§¤ì§ˆ 1ì—ì„œ ë§¤ì§ˆ 2ë¡œ ë¹„ìŠ¤ë“¬íˆ ì…ì‚¬í•  ë•Œ, íŒŒë™ì˜ ì¼ì§ì„  ë‚˜ë€í•œ ë¶€ë¶„ì¸ <b>íŒŒë©´(Wavefront)</b>ì˜ í•œìª½ ë(A)ì´ ê²½ê³„ë©´ì— ë¨¼ì € ë‹¿ì€ í›„ ë°˜ëŒ€ìª½ ë(B)ì´ ê²½ê³„ë©´ì— ë„ë‹¬í•  ë•Œê¹Œì§€ ê±¸ë¦¬ëŠ” ì‹œê°„ $t$ë¥¼ ì´ìš©í•´ ìœ ë„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                <canvas id="wavefrontCanvas" width="600" height="250" style="display: block; margin: 20px auto; border: 1px solid #cbd5e1; border-radius: 8px; max-width: 100%;"></canvas>
                ë§¤ì§ˆ 1, 2ì—ì„œì˜ ë¹›ì˜ ì†ë ¥ì„ ê°ê° $v_1, v_2$ë¼ê³  í•˜ê³ , íŒŒë©´ì´ ê²½ê³„ë©´ê³¼ ë§Œë‚˜ëŠ” ê³µí†µ ë¹—ë³€ì„ $h$ë¼ê³  í•˜ë©´ ê¸°í•˜í•™ì ìœ¼ë¡œ ë‹¤ìŒì´ ì„±ë¦½í•©ë‹ˆë‹¤.
                <div class="math-expr" style="border-color: #e2e8f0; font-size: 1.1rem;">
                    $\sin\theta_1 = \frac{v_1 t}{h}, \quad \sin\theta_2 = \frac{v_2 t}{h}$
                </div>
                ë‘ ì‹ì—ì„œ $h$ì™€ $t$ë¥¼ ì†Œê±°í•˜ë©´ ì†ë ¥ê³¼ ê°ë„ì˜ ê´€ê³„ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
                <div class="math-expr" style="border-color: #e2e8f0; font-size: 1.1rem;">
                    $\frac{\sin\theta_1}{\sin\theta_2} = \frac{v_1}{v_2}$
                </div>
                ì ˆëŒ€ êµ´ì ˆë¥ ì˜ ì •ì˜ $n = \frac{c}{v}$ë¥¼ ëŒ€ì…í•˜ë©´ $v_1 = \frac{c}{n_1}$, $v_2 = \frac{c}{n_2}$ ì´ë¯€ë¡œ,
                <div class="math-expr" style="border-color: #e2e8f0; font-size: 1.1rem;">
                    $\frac{\sin\theta_1}{\sin\theta_2} = \frac{c/n_1}{c/n_2} = \frac{n_2}{n_1}$
                </div>
                ë”°ë¼ì„œ $n_1 \sin\theta_1 = n_2 \sin\theta_2$ ë¼ëŠ” ìŠ¤ë„¬ì˜ ë²•ì¹™ì´ ìœ ë„ë©ë‹ˆë‹¤.
            </div>
        </div>

        <div class="coeff-box" style="margin-top: 20px;">
            <h3 style="margin-top: 0; color: #1e293b;">ê¸°ì¤€ êµ´ì ˆë¥ ê³¼ ë¹›ì˜ ë¶„ì‚° (Dispersion)</h3>
            <div class="theory-content">
                ìš°ë¦¬ê°€ í”íˆ ë§í•˜ëŠ” ë¬¼ì˜ êµ´ì ˆë¥  1.33ì´ë‚˜ ìœ ë¦¬ì˜ 1.52 ê°™ì€ ê°’ì€ <b>'ê¸°ì¤€ êµ´ì ˆë¥ (Base Refractive Index)'</b>ì…ë‹ˆë‹¤. ì´ëŠ” ë³´í†µ <b>ë…¸ë€ìƒ‰ ë‚˜íŠ¸ë¥¨ Dì„ (íŒŒì¥ 589nm)</b>ì„ ê¸°ì¤€ìœ¼ë¡œ ì¸¡ì •í•œ í‰ê· ì ì¸ ê°’ì…ë‹ˆë‹¤.
                <br><br>
                ì‹¤ì œ ë§¤ì§ˆì˜ êµ´ì ˆë¥ ì€ ë¹›ì˜ ìƒ‰ìƒ(íŒŒì¥)ì— ë”°ë¼ ë¯¸ì„¸í•˜ê²Œ ë‹¬ë¼ì§‘ë‹ˆë‹¤. íŒŒì¥ì´ ì§§ì€ <b>íŒŒë€ìƒ‰ ë¹›</b>ì¼ìˆ˜ë¡ ë§¤ì§ˆ ë‚´ì—ì„œ ì†ë ¥ì´ ë” ëŠë ¤ì ¸ <b>êµ´ì ˆë¥ ì´ ë” í¬ê²Œ(ë” ë§ì´ êº¾ì´ê²Œ)</b> ë‚˜íƒ€ë‚˜ë©°, ë°˜ëŒ€ë¡œ ë¹¨ê°„ìƒ‰ ë¹›ì€ ëœ êº¾ì…ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ í”„ë¦¬ì¦˜ì„ í†µê³¼í•œ ë¹›ì´ ë¬´ì§€ê°œìƒ‰ìœ¼ë¡œ ë‚˜ë‰˜ê²Œ ë©ë‹ˆë‹¤. ì‹œë®¬ë ˆì´ì…˜ì—ì„œ ë ˆì´ì € ìƒ‰ìƒì„ ë°”ê¿”ê°€ë©° êµ´ì ˆê°ì˜ ë¯¸ì„¸í•œ ë³€í™”ë¥¼ í™•ì¸í•´ ë³´ì„¸ìš”.
            </div>
        </div>

        <div class="coeff-box" style="margin-top: 20px;">
            <h3 style="margin-top: 0; color: #1e293b;">í”„ë ˆë„¬ ë°˜ì‚¬ (Fresnel Reflection)ì™€ ìì—° í˜„ìƒ</h3>
            <div class="theory-content">
                ë¹›ì´ ê²½ê³„ë©´ì— ì…ì‚¬í•  ë•Œ, ì–¼ë§ˆë§Œí¼ ë°˜ì‚¬ë˜ê³  íˆ¬ê³¼ë ì§€ëŠ” 'ì…ì‚¬ê°'ì— ì˜í•´ í¬ê²Œ ê²°ì •ë©ë‹ˆë‹¤(í”„ë ˆë„¬ ë°©ì •ì‹).
                <br><br>
                <b>[ì…ì‚¬ê°ê³¼ ë°˜ì‚¬ìœ¨ì˜ ê´€ê³„]</b><br>
                ìˆ˜ì§ì— ê°€ê¹ê²Œ ì…ì‚¬í•  ë•Œ(ì…ì‚¬ê° 0Â°)ëŠ” ë¹›ì´ ëŒ€ë¶€ë¶„ ë¬¼ì†ìœ¼ë¡œ íˆ¬ê³¼(êµ´ì ˆ)í•˜ì§€ë§Œ, <b>ê²½ê³„ë©´ì— ìŠ¤ì¹˜ë“¯ì´ ë¹„ìŠ¤ë“¬í•˜ê²Œ ì…ì‚¬í• ìˆ˜ë¡(ì…ì‚¬ê° 90Â°ì— ê°€ê¹Œìš¸ìˆ˜ë¡) íˆ¬ê³¼ìœ¨ì€ 0ì— ê°€ê¹Œì›Œì§€ê³  ë°˜ì‚¬ìœ¨ì´ 100%ë¡œ ê¸‰ì¦</b>í•©ë‹ˆë‹¤.
                <br><br>
                <b>[ê´€ë ¨ëœ ìì—° í˜„ìƒ]</b>
                <ul style="margin-bottom: 0;">
                    <li><b>í•´ì§ˆë…˜ ìˆ˜ë©´ì˜ ëˆˆë¶€ì‹¬:</b> í•œë‚®ì—ëŠ” íƒœì–‘ë¹›ì´ ë¬¼ì†ìœ¼ë¡œ íˆ¬ê³¼ë˜ì–´ ìˆ˜ë©´ì´ ì–´ë‘¡ê²Œ ë³´ì´ì§€ë§Œ, í•´ê°€ ì ¸ì„œ ë¹›ì´ ìˆ˜ë©´ê³¼ ê±°ì˜ í‰í–‰í•˜ê²Œ(ìŠ¤ì¹˜ë“¯) ë“¤ì–´ì˜¤ë©´ ë°˜ì‚¬ìœ¨ì´ ê·¹ëŒ€í™”ë˜ì–´ ìˆ˜ë©´ì´ ë§¤ìš° ëˆˆë¶€ì‹œê²Œ ë¹›ë‚©ë‹ˆë‹¤.</li>
                    <li><b>ë¬¼ìˆ˜ì œë¹„ ëœ¨ê¸°:</b> ëŒë©©ì´ë¥¼ ìˆ˜ë©´ì— ìˆ˜ì§ìœ¼ë¡œ ë˜ì§€ë©´ ë°”ë¡œ ë¬¼ì†ìœ¼ë¡œ ë¹ ì§€ì§€ë§Œ(íˆ¬ê³¼), ìˆ˜ë©´ê³¼ í‰í–‰í•˜ê²Œ ìŠ¤ì¹˜ë“¯ ë˜ì§€ë©´ ë¬¼ì˜ ê°•í•œ ë°˜ë°œë ¥ì— ì˜í•´ íŠ•ê²¨ ì˜¤ë¥´ëŠ”(ë°˜ì‚¬) ê²ƒê³¼ ê°™ì€ ì›ë¦¬ì…ë‹ˆë‹¤.</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- 2. ì‹œë®¬ë ˆì´ì…˜ í™”ë©´ -->
    <div id="viewSim" class="view-section active">
        <canvas id="simCanvas" width="800" height="400"></canvas>

        <div class="dashboard">
            <div class="result-box">
                <span class="result-title">ì…ì‚¬ê° ($\theta_{in}$)</span>
                <div class="result-val" id="dispTheta1">0.0Â°</div>
                <div class="result-sub" id="dispN1">ì…ì‚¬ ë§¤ì§ˆ: n=1.00</div>
            </div>
            <div class="result-box">
                <span class="result-title">êµ´ì ˆê° ($\theta_{out}$)</span>
                <div class="result-val" id="dispTheta2">0.0Â°</div>
                <div class="result-sub" id="dispN2">íˆ¬ê³¼ ë§¤ì§ˆ: n=1.33</div>
            </div>
            <div class="result-box" style="border-top: 3px solid #ef4444;">
                <span class="result-title">ë°˜ì‚¬ìœ¨ (Reflectance)</span>
                <div class="result-val" id="dispReflect">0.0%</div>
                <div class="intensity-bar-container"><div class="intensity-bar" id="barReflect" style="background:#ef4444;"></div></div>
            </div>
            <div class="result-box" style="border-top: 3px solid #3b82f6;">
                <span class="result-title">íˆ¬ê³¼ìœ¨ (Transmittance)</span>
                <div class="result-val" id="dispTransmit">100.0%</div>
                <div class="intensity-bar-container"><div class="intensity-bar" id="barTransmit" style="background:#3b82f6;"></div></div>
            </div>
        </div>

        <div class="controls">
            <!-- ë§¤ì§ˆ 1 ì»¨íŠ¸ë¡¤ -->
            <div class="control-panel" style="border-top: 4px solid #0ea5e9;">
                <label><span class="badge-1">ë§¤ì§ˆ 1 (ìœ„ìª½)</span> <span style="font-size:0.8rem; font-weight:normal;">ê¸°ì¤€ íŒŒì¥: 589nm</span></label>
                <div class="control-group">
                    <select id="preset1" onchange="applyPreset(1)">
                        <option value="1.00">ê³µê¸° / ì§„ê³µ (1.00)</option>
                        <option value="1.33">ë¬¼ (1.33)</option>
                        <option value="1.52">í¬ë¼ìš´ ìœ ë¦¬ (1.52)</option>
                        <option value="2.42">ë‹¤ì´ì•„ëª¬ë“œ (2.42)</option>
                        <option value="custom">ì§ì ‘ ì…ë ¥...</option>
                    </select>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="font-size:0.9rem; font-weight:bold;">ê¸°ë³¸ $n_1$ =</span>
                        <input type="number" id="inN1" min="1.0" max="4.0" step="0.01" value="1.00" oninput="updateFromInput(1)">
                    </div>
                </div>
            </div>

            <!-- ë§¤ì§ˆ 2 ì»¨íŠ¸ë¡¤ -->
            <div class="control-panel" style="border-top: 4px solid #8b5cf6;">
                <label><span class="badge-2">ë§¤ì§ˆ 2 (ì•„ë˜ìª½)</span> <span style="font-size:0.8rem; font-weight:normal;">ê¸°ì¤€ íŒŒì¥: 589nm</span></label>
                <div class="control-group">
                    <select id="preset2" onchange="applyPreset(2)">
                        <option value="1.00">ê³µê¸° / ì§„ê³µ (1.00)</option>
                        <option value="1.33" selected>ë¬¼ (1.33)</option>
                        <option value="1.52">í¬ë¼ìš´ ìœ ë¦¬ (1.52)</option>
                        <option value="2.42">ë‹¤ì´ì•„ëª¬ë“œ (2.42)</option>
                        <option value="custom">ì§ì ‘ ì…ë ¥...</option>
                    </select>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="font-size:0.9rem; font-weight:bold;">ê¸°ë³¸ $n_2$ =</span>
                        <input type="number" id="inN2" min="1.0" max="4.0" step="0.01" value="1.33" oninput="updateFromInput(2)">
                    </div>
                </div>
            </div>
            
            <!-- ì…ì‚¬ ì œì–´ ë° ë ˆì´ì € ìƒ‰ìƒ -->
            <div class="control-panel" style="grid-column: 1 / -1; border-top: 4px solid var(--text-color);">
                <div class="control-group">
                    <label><span>ë ˆì´ì € ìƒ‰ìƒ (ë¹›ì˜ ë¶„ì‚° í™•ì¸)</span></label>
                    <div class="color-btns" style="margin-top: 5px;">
                        <button class="color-btn btn-red active" onclick="setLaserColor('red')">ì ìƒ‰(Red)</button>
                        <button class="color-btn btn-green" onclick="setLaserColor('green')">ë…¹ìƒ‰(Green)</button>
                        <button class="color-btn btn-blue" onclick="setLaserColor('blue')">ì²­ìƒ‰(Blue)</button>
                    </div>
                </div>

                <div class="control-group" style="margin-top: 20px;">
                    <label>
                        <span>ë ˆì´ì € ì…ì‚¬ ë°©í–¥ ë° ê°ë„</span> 
                        <span id="valTheta1" style="color: var(--primary-color);">ë§¤ì§ˆ 1ì—ì„œ 45.0Â°</span>
                    </label>
                    <input type="range" id="inTheta1" min="-89.9" max="89.9" step="0.1" value="-45.0" oninput="calculateAndDraw()">
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem; color: #64748b; margin-top: 4px; font-weight:bold;">
                        <span>â†– ë§¤ì§ˆ 1 (ìœ„) ìˆ˜ì§ì…ì‚¬</span>
                        <span>ê²½ê³„ë©´ (90Â° ìŠ¤ì¹˜ë“¯)</span>
                        <span>ë§¤ì§ˆ 2 (ì•„ë˜) ìˆ˜ì§ì…ì‚¬ â†—</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // --- íƒ­ ì „í™˜ ---
    function switchTab(tabId) {
        document.getElementById('btnTheory').classList.toggle('active', tabId === 'theory');
        document.getElementById('btnSim').classList.toggle('active', tabId === 'sim');
        document.getElementById('viewTheory').classList.toggle('active', tabId === 'theory');
        document.getElementById('viewSim').classList.toggle('active', tabId === 'sim');
        if (tabId === 'sim') calculateAndDraw();
        if (tabId === 'theory') drawWavefrontProof();
    }

    // --- íŒŒë©´ ìœ ë„ ê·¸ë¦¼ ê·¸ë¦¬ê¸° ---
    function drawWavefrontProof() {
        const c = document.getElementById('wavefrontCanvas');
        if(!c) return;
        const ctx = c.getContext('2d');
        const w = c.width, h = c.height;

        ctx.clearRect(0, 0, w, h);

        const A = {x: 150, y: 125};
        const B = {x: 450, y: 125};
        const hyp = B.x - A.x;

        const th1 = 45 * Math.PI / 180;
        const th2 = 25 * Math.PI / 180;

        const Bp = {
            x: A.x + hyp * Math.pow(Math.cos(th1), 2),
            y: A.y - hyp * Math.sin(th1) * Math.cos(th1)
        };

        const Ap = {
            x: A.x + hyp * Math.pow(Math.sin(th2), 2),
            y: A.y + hyp * Math.sin(th2) * Math.cos(th2)
        };

        // ë§¤ì§ˆ ë°°ê²½
        ctx.fillStyle = "#f0f9ff"; ctx.fillRect(0, 0, w, A.y);
        ctx.fillStyle = "#eff6ff"; ctx.fillRect(0, A.y, w, h - A.y);

        // ê²½ê³„ë©´
        ctx.strokeStyle = "#64748b"; ctx.lineWidth = 2;
        ctx.beginPath(); ctx.moveTo(0, A.y); ctx.lineTo(w, A.y); ctx.stroke();

        ctx.fillStyle = "#475569"; ctx.font = "bold 14px sans-serif";
        ctx.textAlign = "left";
        ctx.fillText("ë§¤ì§ˆ 1 (ì†ë ¥ vâ‚)", 20, 25);
        ctx.fillText("ë§¤ì§ˆ 2 (ì†ë ¥ vâ‚‚)", 20, A.y + 25);

        // ì‚¼ê°í˜• ê·¸ë¦¬ê¸°
        ctx.fillStyle = "rgba(59, 130, 246, 0.15)";
        ctx.beginPath(); ctx.moveTo(A.x, A.y); ctx.lineTo(Bp.x, Bp.y); ctx.lineTo(B.x, B.y); ctx.fill();
        
        ctx.fillStyle = "rgba(220, 38, 38, 0.15)";
        ctx.beginPath(); ctx.moveTo(A.x, A.y); ctx.lineTo(Ap.x, Ap.y); ctx.lineTo(B.x, B.y); ctx.fill();

        // íŒŒë©´ ì„  (ë‘ê»ê²Œ)
        ctx.strokeStyle = "#2563eb"; ctx.lineWidth = 3;
        ctx.beginPath(); ctx.moveTo(A.x, A.y); ctx.lineTo(Bp.x, Bp.y); ctx.stroke();
        ctx.fillStyle = "#2563eb"; ctx.textAlign="right"; ctx.fillText("íŒŒë©´ A-B'", Bp.x - 10, Bp.y - 10);

        ctx.strokeStyle = "#dc2626"; ctx.lineWidth = 3;
        ctx.beginPath(); ctx.moveTo(B.x, B.y); ctx.lineTo(Ap.x, Ap.y); ctx.stroke();
        ctx.fillStyle = "#dc2626"; ctx.textAlign="left"; ctx.fillText("íŒŒë©´ A'-B", Ap.x + 10, Ap.y + 20);

        // í™”ì‚´í‘œ ê·¸ë¦¬ëŠ” ë„êµ¬
        const drawArrow = (fromX, fromY, toX, toY, color) => {
            ctx.strokeStyle = color; ctx.lineWidth = 2;
            ctx.beginPath(); ctx.moveTo(fromX, fromY); ctx.lineTo(toX, toY); ctx.stroke();
            const angle = Math.atan2(toY - fromY, toX - fromX);
            ctx.fillStyle = color;
            ctx.beginPath(); ctx.moveTo(toX, toY);
            ctx.lineTo(toX - 8*Math.cos(angle - Math.PI/6), toY - 8*Math.sin(angle - Math.PI/6));
            ctx.lineTo(toX - 8*Math.cos(angle + Math.PI/6), toY - 8*Math.sin(angle + Math.PI/6));
            ctx.fill();
        };

        // ê´‘ì„  ê²½ë¡œ ì„  ê·¸ë¦¬ê¸°
        ctx.strokeStyle = "#334155"; ctx.lineWidth = 2; ctx.setLineDash([4, 4]);
        ctx.beginPath(); ctx.moveTo(Bp.x - 60*Math.sin(th1), Bp.y - 60*Math.cos(th1)); ctx.lineTo(Bp.x, Bp.y); ctx.stroke(); 
        ctx.beginPath(); ctx.moveTo(A.x - 100*Math.sin(th1), A.y - 100*Math.cos(th1)); ctx.lineTo(A.x, A.y); ctx.stroke(); 
        ctx.setLineDash([]);
        
        drawArrow(Bp.x, Bp.y, B.x, B.y, "#2563eb"); // B' to B
        drawArrow(A.x, A.y, Ap.x, Ap.y, "#dc2626"); // A to A'
        
        ctx.setLineDash([4, 4]); ctx.strokeStyle = "#334155";
        ctx.beginPath(); ctx.moveTo(Ap.x, Ap.y); ctx.lineTo(Ap.x + 60*Math.sin(th2), Ap.y + 60*Math.cos(th2)); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(B.x, B.y); ctx.lineTo(B.x + 100*Math.sin(th2), B.y + 100*Math.cos(th2)); ctx.stroke();
        ctx.setLineDash([]);

        // ê³µí†µ ë¹—ë³€ h
        ctx.strokeStyle = "#0f172a"; ctx.lineWidth = 2;
        ctx.beginPath(); ctx.moveTo(A.x, A.y); ctx.lineTo(B.x, B.y); ctx.stroke();

        // í…ìŠ¤íŠ¸ ë¼ë²¨
        ctx.fillStyle = "#0f172a"; ctx.textAlign="center"; ctx.font = "bold 14px sans-serif";
        ctx.fillText("A", A.x - 15, A.y + 5);
        ctx.fillText("B", B.x + 15, B.y + 5);
        ctx.fillText("B'", Bp.x + 15, Bp.y - 5);
        ctx.fillText("A'", Ap.x - 15, Ap.y + 5);

        ctx.fillText("h (ê³µí†µ ë¹—ë³€)", (A.x + B.x)/2, A.y + 20);
        
        ctx.fillStyle = "#2563eb";
        ctx.fillText("vâ‚t", (Bp.x + B.x)/2 + 15, (Bp.y + B.y)/2);
        
        ctx.fillStyle = "#dc2626";
        ctx.fillText("vâ‚‚t", (A.x + Ap.x)/2 - 15, (A.y + Ap.y)/2);

        // ì§ê° í‘œì‹œ
        const drawRightAngle = (px, py, ang1, ang2) => {
            const size = 10;
            const p1x = px + size * Math.cos(ang1), p1y = py + size * Math.sin(ang1);
            const p2x = px + size * Math.cos(ang2), p2y = py + size * Math.sin(ang2);
            const p3x = px + size * Math.cos(ang1) + size * Math.cos(ang2);
            const p3y = py + size * Math.sin(ang1) + size * Math.sin(ang2);
            ctx.strokeStyle = "#64748b"; ctx.lineWidth = 1.5;
            ctx.beginPath(); ctx.moveTo(p1x, p1y); ctx.lineTo(p3x, p3y); ctx.lineTo(p2x, p2y); ctx.stroke();
        };
        const angleABp = Math.atan2(A.y - Bp.y, A.x - Bp.x);
        const angleBBp = Math.atan2(B.y - Bp.y, B.x - Bp.x);
        drawRightAngle(Bp.x, Bp.y, angleABp, angleBBp);

        const angleAAp = Math.atan2(A.y - Ap.y, A.x - Ap.x);
        const angleBAp = Math.atan2(B.y - Ap.y, B.x - Ap.x);
        drawRightAngle(Ap.x, Ap.y, angleAAp, angleBAp);

        // ê°ë„ í˜¸ ê·¸ë¦¬ê¸°
        ctx.strokeStyle = "#0f172a"; ctx.lineWidth = 1.5;
        ctx.beginPath(); ctx.arc(A.x, A.y, 35, -th1, 0); ctx.stroke();
        ctx.fillText("Î¸â‚", A.x + 42, A.y - 12);

        ctx.beginPath(); ctx.arc(B.x, B.y, 35, Math.PI, Math.PI - th2, true); ctx.stroke();
        ctx.fillText("Î¸â‚‚", B.x - 45, B.y + 18);
    }

    const canvas = document.getElementById('simCanvas');
    const ctx = canvas.getContext('2d');

    // DOM ìš”ì†Œ
    const inN1 = document.getElementById('inN1');
    const inN2 = document.getElementById('inN2');
    const preset1 = document.getElementById('preset1');
    const preset2 = document.getElementById('preset2');
    const inTheta1 = document.getElementById('inTheta1');
    
    // ë ˆì´ì € ì„¤ì •
    let laserColorType = 'red';
    // ë¹›ì˜ íŒŒì¥ì— ë”°ë¥¸ êµ´ì ˆë¥  ë³´ì •ì¹˜ (ë¶„ì‚° íš¨ê³¼ êµ¬í˜„)
    const colorMap = {
        'red': { hex: '#ef4444', offset: -0.015, name: 'ì ìƒ‰' },
        'green': { hex: '#10b981', offset: 0.0, name: 'ë…¹ìƒ‰' },
        'blue': { hex: '#3b82f6', offset: 0.02, name: 'ì²­ìƒ‰' }
    };

    function setLaserColor(c) {
        laserColorType = c;
        document.querySelectorAll('.color-btn').forEach(btn => btn.classList.remove('active'));
        document.querySelector(`.btn-${c}`).classList.add('active');
        
        document.getElementById('dispTheta1').style.color = colorMap[c].hex;
        document.getElementById('dispTheta2').style.color = colorMap[c].hex;
        calculateAndDraw();
    }

    function applyPreset(num) {
        const presetObj = num === 1 ? preset1 : preset2;
        const inputObj = num === 1 ? inN1 : inN2;
        if (presetObj.value !== 'custom') inputObj.value = presetObj.value;
        calculateAndDraw();
    }

    function updateFromInput(num) {
        const presetObj = num === 1 ? preset1 : preset2;
        const inputObj = num === 1 ? inN1 : inN2;
        const val = parseFloat(inputObj.value).toFixed(2);
        let found = false;
        for (let i = 0; i < presetObj.options.length; i++) {
            if (presetObj.options[i].value === val) {
                presetObj.selectedIndex = i; found = true; break;
            }
        }
        if (!found) presetObj.value = 'custom';
        calculateAndDraw();
    }

    // ë¶„ì‚°ì´ ì ìš©ëœ ì‹¤ì œ êµ´ì ˆë¥  ê³„ì‚° (ì§„ê³µ/ê³µê¸°ëŠ” íŒŒì¥ì— ê´€ê³„ì—†ì´ 1)
    function getEffectiveN(baseN) {
        if (baseN <= 1.001) return 1.0; 
        return baseN + colorMap[laserColorType].offset;
    }

    // ë§¤ì§ˆ ë°°ê²½ìƒ‰ ë Œë”ë§
    function getMediumBgColor(n, isTop) {
        const normalized = Math.min(Math.max((n - 1.0) / 1.5, 0), 1);
        if (isTop) {
            const r = Math.floor(255 - normalized * 40);
            const g = Math.floor(255 - normalized * 20);
            return `rgb(${r}, ${g}, 255)`;
        } else {
            const r = Math.floor(255 - normalized * 30);
            const g = Math.floor(255 - normalized * 40);
            return `rgb(${r}, ${g}, 255)`;
        }
    }

    function drawLaser(x, y, angle, colorHex) {
        ctx.save();
        ctx.translate(x, y);
        ctx.rotate(angle);
        ctx.fillStyle = "#334155"; ctx.fillRect(-45, -10, 45, 20); // ëª¸í†µ
        ctx.fillStyle = "#94a3b8"; ctx.fillRect(0, -7, 8, 14); // íŒ
        ctx.fillStyle = "#000"; ctx.fillRect(8, -3, 2, 6); // êµ¬ë©
        ctx.fillStyle = colorHex; ctx.fillRect(-25, -13, 10, 3); // ë²„íŠ¼
        ctx.restore();
    }

    function drawRayLabel(startX, startY, endX, endY, label, colorHex, alpha) {
        const midX = (startX + endX) / 2;
        const midY = (startY + endY) / 2;
        let angle = Math.atan2(endY - startY, endX - startX);
        if (angle > Math.PI/2 || angle < -Math.PI/2) angle += Math.PI;

        ctx.save();
        ctx.translate(midX, midY);
        ctx.rotate(angle);
        ctx.globalAlpha = Math.max(0.4, alpha); 
        ctx.fillStyle = colorHex;
        ctx.font = "bold 13px sans-serif";
        ctx.textAlign = "center";
        ctx.fillText(label, 0, -12);
        ctx.restore();
    }

    function calculateAndDraw() {
        const baseN1 = parseFloat(inN1.value);
        const baseN2 = parseFloat(inN2.value);
        
        const effN1 = getEffectiveN(baseN1);
        const effN2 = getEffectiveN(baseN2);

        // íŒŒë…¸ë¼ë§ˆ ìŠ¬ë¼ì´ë” ë¡œì§ (-90 ~ +90)
        // -90: ë§¤ì§ˆ 1 ìˆ˜ì§ ì…ì‚¬ (0ë„)
        // 0: ê²½ê³„ë©´ ìˆ˜í‰ ì…ì‚¬ (90ë„)
        // +90: ë§¤ì§ˆ 2 ìˆ˜ì§ ì…ì‚¬ (0ë„)
        const sliderVal = parseFloat(inTheta1.value);
        const isFromTop = sliderVal <= 0;
        
        // ì‹¤ì œ ì…ì‚¬ê°(ë²•ì„  ê¸°ì¤€) ê³„ì‚°: ì¤‘ì•™(0)ì¼ ë•Œ 90ë„, ì–‘ë(Â±90)ì¼ ë•Œ 0ë„
        const theta_in_deg = 90 - Math.abs(sliderVal); 
        const theta_in_rad = theta_in_deg * Math.PI / 180;
        
        const n_in = isFromTop ? effN1 : effN2;
        const n_out = isFromTop ? effN2 : effN1;

        // --- ëŒ€ì‹œë³´ë“œ ë° ì»¨íŠ¸ë¡¤ëŸ¬ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ ---
        const dirText = isFromTop ? "ë§¤ì§ˆ 1(ìœ„)" : "ë§¤ì§ˆ 2(ì•„ë˜)";
        document.getElementById('valTheta1').innerText = `${dirText}ì—ì„œ ${theta_in_deg.toFixed(1)}Â°`;
        document.getElementById('dispTheta1').innerText = `${theta_in_deg.toFixed(1)}Â°`;
        
        // êµ´ì ˆë¥  í‘œì‹œ (ë¶„ì‚°ì´ ì ìš©ëœ ì‹¤ì œ êµ´ì ˆë¥ ì„ ë³´ì—¬ì¤Œ)
        document.getElementById('dispN1').innerHTML = `ì…ì‚¬ ë§¤ì§ˆ: n = ${n_in.toFixed(3)} <span style="font-size:0.75rem; color:#ef4444;">(${colorMap[laserColorType].name}ë¹› ê¸°ì¤€)</span>`;
        document.getElementById('dispN2').innerHTML = `íˆ¬ê³¼ ë§¤ì§ˆ: n = ${n_out.toFixed(3)} <span style="font-size:0.75rem; color:#ef4444;">(${colorMap[laserColorType].name}ë¹› ê¸°ì¤€)</span>`;

        let theta_out_rad = 0;
        let theta_out_deg = 0;
        let isTIR = false;
        let Reflectance = 0;
        let Transmittance = 0;

        // ìŠ¤ë„¬ì˜ ë²•ì¹™
        const sinThetaOut = (n_in / n_out) * Math.sin(theta_in_rad);

        if (sinThetaOut > 1.0) {
            // ì „ë°˜ì‚¬
            isTIR = true;
            Reflectance = 1.0;
            Transmittance = 0.0;
        } else {
            theta_out_rad = Math.asin(sinThetaOut);
            theta_out_deg = theta_out_rad * 180 / Math.PI;
            
            // í”„ë ˆë„¬ ë°©ì •ì‹ ê³„ì‚° (ë¬´í¸ê´‘)
            if (theta_in_rad === 0) { // ìˆ˜ì§ ì…ì‚¬
                let r = (n_in - n_out) / (n_in + n_out);
                Reflectance = r * r;
            } else if (theta_in_deg >= 89.9) { // ìŠ¤ì¹˜ë“¯ ì…ì‚¬ (90ë„)
                Reflectance = 1.0;
            } else {
                let rs = (n_in * Math.cos(theta_in_rad) - n_out * Math.cos(theta_out_rad)) / (n_in * Math.cos(theta_in_rad) + n_out * Math.cos(theta_out_rad));
                let rp = (n_in * Math.cos(theta_out_rad) - n_out * Math.cos(theta_in_rad)) / (n_in * Math.cos(theta_out_rad) + n_out * Math.cos(theta_in_rad));
                Reflectance = (rs*rs + rp*rp) / 2.0;
            }
            Transmittance = 1.0 - Reflectance;
        }

        // ëŒ€ì‹œë³´ë“œ ê°•ë„ ë°” ì—…ë°ì´íŠ¸
        document.getElementById('dispReflect').innerText = `${(Reflectance * 100).toFixed(1)}%`;
        document.getElementById('barReflect').style.width = `${Reflectance * 100}%`;
        
        document.getElementById('dispTransmit').innerText = `${(Transmittance * 100).toFixed(1)}%`;
        document.getElementById('barTransmit').style.width = `${Transmittance * 100}%`;

        if (isTIR) {
            document.getElementById('dispTheta2').innerText = "ì „ë°˜ì‚¬";
        } else {
            document.getElementById('dispTheta2').innerText = `${theta_out_deg.toFixed(1)}Â°`;
        }

        // --- ìº”ë²„ìŠ¤ ê·¸ë¦¬ê¸° ---
        const cw = canvas.width;
        const ch = canvas.height;
        const cx = cw / 2;
        const cy = ch / 2;
        const rayLength = 320; 
        const laserHex = colorMap[laserColorType].hex;

        ctx.clearRect(0, 0, cw, ch);

        // ë§¤ì§ˆ ë°°ê²½
        ctx.fillStyle = getMediumBgColor(baseN1, true); ctx.fillRect(0, 0, cw, cy);
        ctx.fillStyle = getMediumBgColor(baseN2, false); ctx.fillRect(0, cy, cw, ch);

        ctx.fillStyle = "#64748b"; ctx.font = "bold 16px sans-serif"; ctx.textAlign = "left";
        ctx.fillText(`ë§¤ì§ˆ 1 (ê¸°ë³¸ n = ${baseN1.toFixed(2)})`, 20, 30);
        ctx.fillText(`ë§¤ì§ˆ 2 (ê¸°ë³¸ n = ${baseN2.toFixed(2)})`, 20, ch - 20);

        // ê²½ê³„ë©´ ë° ë²•ì„ 
        ctx.strokeStyle = "#94a3b8"; ctx.lineWidth = 2;
        ctx.beginPath(); ctx.moveTo(0, cy); ctx.lineTo(cw, cy); ctx.stroke();
        
        ctx.strokeStyle = "#cbd5e1"; ctx.lineWidth = 2; ctx.setLineDash([8, 8]);
        ctx.beginPath(); ctx.moveTo(cx, 0); ctx.lineTo(cx, ch); ctx.stroke(); ctx.setLineDash([]);

        // --- ì¢Œí‘œ ë³€í™˜ (íŒŒë…¸ë¼ë§ˆ ìŠ¬ë¼ì´ë” ê°ë„ ì ìš©) ---
        // sliderVal: -90(Top) ~ 0(Left) ~ +90(Bottom)
        // í™”ë©´ ê¸°í•˜í•™ì ìœ¼ë¡œ ê°ë„ alphaë¥¼ ë³€í™˜ (yì¶• ì•„ë˜ê°€ +)
        const alpha = sliderVal * Math.PI / 180; 
        // ì…ì‚¬ê´‘ ì‹œì‘ ì¢Œí‘œ: ì¤‘ì‹¬ì—ì„œ ë°˜ì§€ë¦„ Rë§Œí¼ ë–¨ì–´ì§„ ê³³
        const incX = cx - rayLength * Math.cos(alpha);
        const incY = cy + rayLength * Math.sin(alpha);
        
        // ë°˜ì‚¬ê´‘ ë° êµ´ì ˆê´‘ ì¢Œí‘œ ê³„ì‚°
        let refX, refY, refrX, refrY;
        if (isFromTop) {
            refX = cx + rayLength * Math.sin(theta_in_rad); 
            refY = cy - rayLength * Math.cos(theta_in_rad);
            refrX = cx + rayLength * Math.sin(theta_out_rad); 
            refrY = cy + rayLength * Math.cos(theta_out_rad);
        } else {
            refX = cx + rayLength * Math.sin(theta_in_rad); 
            refY = cy + rayLength * Math.cos(theta_in_rad);
            refrX = cx + rayLength * Math.sin(theta_out_rad); 
            refrY = cy - rayLength * Math.cos(theta_out_rad);
        }

        // ë¹› ì„¸ê¸°ì— ë”°ë¥¸ íˆ¬ëª…ë„/êµµê¸° ì‹œê°í™” í•¨ìˆ˜
        const drawRay = (startX, startY, endX, endY, intensity) => {
            let visualAlpha = Math.pow(intensity, 0.45); 
            if(visualAlpha < 0.05 && intensity > 0) visualAlpha = 0.05; 
            
            ctx.strokeStyle = laserHex;
            ctx.lineWidth = 1 + 4 * visualAlpha; 
            ctx.globalAlpha = visualAlpha;
            ctx.beginPath(); ctx.moveTo(startX, startY); ctx.lineTo(endX, endY); ctx.stroke();
            ctx.globalAlpha = 1.0;
            return visualAlpha;
        };

        // 1. ì…ì‚¬ê´‘
        drawRay(incX, incY, cx, cy, 1.0);
        drawRayLabel(incX, incY, cx, cy, "ì…ì‚¬ê´‘", laserHex, 1.0);

        // 2. ë°˜ì‚¬ê´‘
        let visR = drawRay(cx, cy, refX, refY, Reflectance);
        let rLabel = isTIR ? "ì „ë°˜ì‚¬ê´‘" : "ë°˜ì‚¬ê´‘";
        drawRayLabel(cx, cy, refX, refY, rLabel, laserHex, visR);

        // 3. êµ´ì ˆê´‘
        if (!isTIR) {
            let visT = drawRay(cx, cy, refrX, refrY, Transmittance);
            if (theta_in_deg < 89.9) { // ìŠ¤ì¹˜ë“¯ ì…ì‚¬í•  ë• êµ´ì ˆê´‘ ë¼ë²¨ ìƒëµ
                drawRayLabel(cx, cy, refrX, refrY, "êµ´ì ˆê´‘", laserHex, visT);
            }
            
            // êµ´ì ˆê° í˜¸(Arc)
            if (theta_in_deg > 0) {
                ctx.strokeStyle = laserHex; ctx.globalAlpha = visT; ctx.lineWidth = 2; ctx.beginPath();
                if(isFromTop) ctx.arc(cx, cy, 50, Math.PI/2 - theta_out_rad, Math.PI/2);
                else ctx.arc(cx, cy, 50, -Math.PI/2, -Math.PI/2 + theta_out_rad);
                ctx.stroke(); ctx.globalAlpha = 1.0;
            }
        }

        // ì…ì‚¬ê° í˜¸(Arc)
        if (theta_in_deg > 0 && theta_in_deg < 89.9) {
            ctx.strokeStyle = laserHex; ctx.lineWidth = 2; ctx.beginPath();
            if(isFromTop) ctx.arc(cx, cy, 40, -Math.PI/2 - theta_in_rad, -Math.PI/2);
            else ctx.arc(cx, cy, 40, Math.PI/2, Math.PI/2 + theta_in_rad);
            ctx.stroke();
        }

        // ë ˆì´ì € í¬ì¸í„° ë³¸ì²´
        const laserAngle = Math.atan2(cy - incY, cx - incX);
        drawLaser(incX, incY, laserAngle, laserHex);
    }

    // ì´ˆê¸°í™”
    setLaserColor('red'); 
    drawWavefrontProof();
</script>

</body>
</html>
